---
name: create-pr
description: Generate a pull request title and description from the current branch's commits, following the project's PR style with imperative titles and grouped summary bullets.
---

# Create PR Description

Generate a pull request title and description following the project's PR style.

## Instructions

### 1. Gather context (do ALL of these)

Run these commands to build a complete picture before writing anything:

```bash
# Commit overview
git log main..HEAD --oneline --stat

# Full diff stat for file-level scope
git diff main..HEAD --stat

# Actual code changes — read the diff, don't just skim filenames
git diff main..HEAD
```

If the full diff is too large, diff individual areas (backend routes, frontend, storage, etc.) in batches. You must understand **what the code actually does**, not just which files were touched.

### 2. Write `pr.md`

Write a `pr.md` file at the repository root with the following structure:

```markdown
# <Title>

## Summary

- **<Feature/change area>** — 1-3 sentence description explaining what changed, how it works, and why it matters.
- ... (one bullet per logical change area, not per commit)
```

### Style Rules

- **Title**: Imperative mood, start with a verb (Add, Fix, Refactor, etc.). Summarize the entire PR scope — not just one commit.
- **Summary bullets**: Each bullet is `**Bold label** — description`. Group related commits into a single bullet when they touch the same feature area.
- **Depth**: Each bullet should be specific — name the classes, functions, patterns, or files involved. Describe the mechanism, not just the intent. "Fix a race condition in `get_or_create_chat` by moving creation inside the same session" is good. "Fix database issues" is not.
- **Coverage**: Every meaningful change in the diff must appear in a bullet. If a change touches security (CORS, auth, SQL injection), error handling, accessibility, or concurrency, it gets its own bullet — do not bury these inside unrelated items.
- **Tone**: Technical but with personality. Be precise about what changed, but keep it engaging — a well-placed analogy, a dry quip, or a vivid verb goes a long way. Think "engineer explaining their work at a bar" not "JIRA ticket". Still concise, still accurate, just not robotic.
- **No test plan section**: Do not include a "Test plan" or "Testing" section.
- **No mention of tests**: Do not reference test files, test results, or testing in the PR description.
- **No emoji**.
- **No "Generated by" footer**.
